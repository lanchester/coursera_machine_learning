## 実装上の詳細: 平均標準化

協調フィルタリングで映画毎に学習したフィーチャーを得ているとして、関連する映画としてそれに近いものを探す。映画のフィーチャーベクトルと別の映画のフィーチャーベクトルの距離が小さいと類似した映画と見なすことができる。

### 映画のレーティングをしていないユーザー

<img width="961" alt="2016-10-25 18 23 21" src="https://cloud.githubusercontent.com/assets/6447085/19680307/25289b86-9ae0-11e6-9efe-542646544700.png">

どの映画もレーティングしていない場合はベクトルの内積は0になるのでコスト関数を最適化すると正規化項のみを最適化することになり値は0になる。

つまり全ての映画のレーティングを0と予測してしまい、レコメンデーションも出来なくなる。これを回避するために平均標準化を行う。

### 平均標準化

<img width="963" alt="2016-10-25 18 24 08" src="https://cloud.githubusercontent.com/assets/6447085/19680338/4080ea28-9ae0-11e6-920e-b09dccfcb703.png">

レーティングされている映画についてそのレーティングの平均値ベクトル $\mu$ を求め、実際の値をその平均値で引く。これによって出来たフィーチャーを予測に使う。引いた $\mu$ をコスト関数の定数として足し戻すことでレーティングをしていなくとも平均値のレーティングを予測することができる。
